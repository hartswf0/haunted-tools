<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ethical Explorer Pack â€” Caution UI</title>
<style>
  :root {
    /* Caution accent palette */
    --bg: #0f1114;
    --fg: #f5f7fa;
    --muted: #c7cbd3;
    --card: #151922;
    --card-border: #232838;
    --acc: #f59e0b;       /* amber 500 */
    --acc-strong: #b45309;/* amber 700 */
    --acc-soft: #fef3c7;  /* amber 100 */
    --ok: #10b981;
    --warn: #f59e0b;
    --danger: #ef4444;
    --chip-fg: #0d0f12;
    --focus: #60a5fa;
  }
  @media (prefers-color-scheme: light) {
    :root {
      --bg: #fcfcfd;
      --fg: #121417;
      --muted: #4b5563;
      --card: #ffffff;
      --card-border: #e5e7eb;
      --chip-fg: #111827;
    }
  }
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    background: var(--bg);
    color: var(--fg);
  }
  a { color: var(--focus); }
  .skip-link { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
  .skip-link:focus { left: 1rem; top: 1rem; width:auto; height:auto; padding:.5rem .75rem; background: var(--acc-soft); color:#111; border-radius:.5rem; box-shadow:0 0 0 3px var(--acc); }

  header {
    position: sticky; top: 0; z-index: 20;
    background: linear-gradient(135deg, var(--card), var(--bg));
    border-bottom: 1px solid var(--card-border);
    backdrop-filter: blur(6px);
  }
  .bar {
    max-width: 1024px; margin: 0 auto; padding: .75rem 1rem; display:flex; align-items:center; gap:.75rem; flex-wrap:wrap;
  }
  .stripe {
    height: .5rem; background:
      repeating-linear-gradient(135deg,
        var(--acc) 0 12px,
        transparent 12px 24px);
    border-bottom: 1px solid var(--card-border);
  }
  .title { font-weight: 700; letter-spacing:.2px; }
  .tag { font-size: .8rem; padding:.2rem .5rem; border:1px solid var(--card-border); border-radius:999px; color: var(--muted); }
  .toggles { margin-left:auto; display:flex; gap:.5rem; align-items:center; }
  .toggle {
    display:inline-flex; align-items:center; gap:.5rem; padding:.35rem .6rem; border-radius:999px; background: var(--card);
    border:1px solid var(--card-border); cursor:pointer; user-select:none; font-size:.85rem; color:var(--fg);
  }
  .toggle[aria-pressed="true"] { outline:2px solid var(--acc); outline-offset:2px; }
  .toggle input { position:absolute; opacity:0; pointer-events:none; }

  main { max-width: 1024px; margin: 0 auto; padding: 1rem; }
  .intro { background: var(--card); border:1px solid var(--card-border); border-radius: 16px; padding: 1rem; display:grid; gap:.75rem; }
  .intro p { margin:0; color: var(--muted); }
  .chips { display:flex; gap:.5rem; flex-wrap: wrap; }
  .chip { border:1px solid var(--card-border); background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 80%, var(--acc-soft) 20%)); color:var(--muted);
          padding:.45rem .65rem; border-radius:999px; cursor:pointer; font-weight:600; font-size:.85rem; display:inline-flex; align-items:center; gap:.4rem; }
  .chip .dot { width:.55rem; height:.55rem; border-radius:50%; background: var(--acc); box-shadow: 0 0 0 2px color-mix(in srgb, var(--acc) 60%, transparent 40%) inset; }
  .chip[aria-pressed="true"] { color: var(--chip-fg); background: var(--acc-soft); border-color: color-mix(in srgb, var(--acc) 50%, var(--card-border) 50%); }
  .chip[aria-pressed="true"] .dot { background: var(--acc-strong); }

  .kpis { display:flex; gap:.75rem; flex-wrap:wrap; }
  .kpi { background: var(--card); border:1px solid var(--card-border); border-radius: 12px; padding:.6rem .8rem; font-size:.9rem; color: var(--muted); }

  /* Accordion */
  .accordion { margin-top: 1rem; display:grid; gap:.75rem; }
  .acc {
    border:1px solid var(--card-border); border-radius: 16px; overflow:hidden; background: var(--card);
  }
  .acc h3 { margin:0; }
  .acc .trigger { width:100%; text-align:left; background:linear-gradient(180deg, color-mix(in srgb, var(--card) 85%, var(--acc-soft) 15%), var(--card)); color: var(--fg); border:0; padding: .9rem 1rem; cursor:pointer; display:flex; align-items:center; gap:.75rem; }
  .badge { background: var(--acc-soft); color:#111; border:1px solid color-mix(in srgb, var(--acc) 50%, #0000 50%); padding:.15rem .45rem; border-radius:999px; font-size:.75rem; font-weight:700; }
  .acc .chev { margin-left:auto; transition: transform .15s ease; }
  .acc .panel { padding: .25rem 1rem 1rem; border-top:1px solid var(--card-border); }
  .acc[data-open="true"] .chev { transform: rotate(90deg); }

  /* Cards & lists */
  .grid { display:grid; grid-template-columns: repeat(12, 1fr); gap:.75rem; }
  .col-12 { grid-column: span 12; }
  @media (min-width: 640px) { .col-6 { grid-column: span 6; } }
  @media (min-width: 960px) { .col-4 { grid-column: span 4; } }

  .card { background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 85%, var(--acc-soft) 15%)); border:1px solid var(--card-border); border-radius: 14px; padding: .9rem; display:grid; gap:.45rem; }
  .card h4 { margin:.1rem 0; font-size:1.05rem; }
  .pill { display:inline-block; padding:.18rem .45rem; border-radius:999px; font-size:.72rem; background: var(--acc-soft); color:#111; border:1px solid color-mix(in srgb, var(--acc) 45%, #0000 55%); }
  .meta { color: var(--muted); font-size:.85rem; }
  .list { list-style:none; padding-left:1rem; margin:.25rem 0 0; }
  .list li { position:relative; margin:.35rem 0; color: var(--fg); }
  .list li::before { content:"âš "; position:absolute; left:-1.2rem; top:.05rem; color: var(--warn); }
  .ok li::before { content:"âœ“"; color: var(--ok); }

  footer { max-width:1024px; margin: 2rem auto 6rem; padding: 0 1rem; color: var(--muted); }

  /* High-contrast helper */
  @media (prefers-contrast: more) {
    .chip, .toggle, .kpi, .acc .trigger { border-width:2px; }
    .stripe { height:.6rem; }
  }

  /* Utility */
  .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
</style>
</head>
<body>
<a class="skip-link" href="#main">Skip to content</a>
<header>
  <div class="stripe" aria-hidden="true"></div>
  <div class="bar" role="banner">
    <div class="title" aria-label="Kit name"><strong>Ethical Explorer Pack</strong> <span class="tag">Design</span></div>
    <div class="toggles" role="group" aria-label="Feedback toggles">
      <button class="toggle" id="toggle-audio" role="switch" aria-checked="true" aria-pressed="true" title="Toggle subtle audio cues">
        <span aria-hidden="true">ðŸ”ˆ</span><span>Audio</span>
      </button>
      <button class="toggle" id="toggle-haptics" role="switch" aria-checked="true" aria-pressed="true" title="Toggle haptics">
        <span aria-hidden="true">ðŸ“³</span><span>Haptics</span>
      </button>
    </div>
  </div>
</header>

<main id="main" tabindex="-1">
  <section class="intro" aria-labelledby="about">
    <h1 id="about" style="margin:0; font-size:1.35rem;">Surface harms Â· Normalize anticipatory governance</h1>
    <p><strong>Mission:</strong> Surface harms and ethics in product work. <strong>Purpose:</strong> Normalize anticipatory governance in everyday design & engineering decisions.</p>
    <div class="kpis" aria-label="Quick stats">
      <div class="kpi" id="kpi-selected">Selected risk zones: <strong>0</strong></div>
      <div class="kpi" id="kpi-visible-cards">Visible cards: <strong>0</strong></div>
      <div class="kpi" id="kpi-visible-checks">Visible checklist items: <strong>0</strong></div>
    </div>
    <div>
      <h2 style="margin:.25rem 0; font-size:1rem;">Riskâ€‘zone chips</h2>
      <div class="chips" role="toolbar" aria-label="Risk zones filter">
        <!-- chips injected by JS -->
      </div>
      <div aria-live="polite" class="sr-only" id="live"></div>
    </div>
  </section>

  <section class="accordion" aria-label="Explorer components">
    <!-- Riskâ€‘Zone Cards -->
    <article class="acc" data-open="true">
      <h3>
        <button class="trigger" aria-expanded="true" aria-controls="panel-cards" id="acc-cards">
          <span>Riskâ€‘Zone Cards</span>
          <span class="badge" id="count-cards">0</span>
          <span class="chev" aria-hidden="true">â–¸</span>
        </button>
      </h3>
      <div class="panel" id="panel-cards" role="region" aria-labelledby="acc-cards">
        <div class="grid" id="cards-grid">
          <!-- cards injected by JS -->
        </div>
      </div>
    </article>

    <!-- Checklists -->
    <article class="acc" data-open="false">
      <h3>
        <button class="trigger" aria-expanded="false" aria-controls="panel-checks" id="acc-checks">
          <span>Checklists</span>
          <span class="badge" id="count-checks">0</span>
          <span class="chev" aria-hidden="true">â–¸</span>
        </button>
      </h3>
      <div class="panel" id="panel-checks" role="region" aria-labelledby="acc-checks" hidden>
        <div class="grid" id="checks-grid">
          <!-- checklist injected by JS -->
        </div>
      </div>
    </article>

    <!-- Discussion Guides -->
    <article class="acc" data-open="false">
      <h3>
        <button class="trigger" aria-expanded="false" aria-controls="panel-guides" id="acc-guides">
          <span>Discussion Guides</span>
          <span class="badge" id="count-guides">5</span>
          <span class="chev" aria-hidden="true">â–¸</span>
        </button>
      </h3>
      <div class="panel" id="panel-guides" role="region" aria-labelledby="acc-guides" hidden>
        <div class="grid">
          <div class="card col-12">
            <h4>Preâ€‘mortem (15â€“25m)</h4>
            <p class="meta">Imagine launch went wrong. What failed, for whom, and why?</p>
            <ul class="list">
              <li>List top 3 harms per selected risk zone.</li>
              <li>Sketch plausible headlines + user quotes.</li>
              <li>Identify enabling decisions and missing safeguards.</li>
            </ul>
          </div>
          <div class="card col-12">
            <h4>Stakeholder & Power Map (20m)</h4>
            <p class="meta">Who benefits, who bears risk, who decides, who is heard?</p>
            <ul class="list">
              <li>Map internal & external actors, including nonâ€‘users.</li>
              <li>Mark asymmetries (data, labor, income, safety).</li>
              <li>Propose representation & recourse mechanisms.</li>
            </ul>
          </div>
          <div class="card col-12">
            <h4>Mitigation Canvas (25m)</h4>
            <p class="meta">Turn harms into controls, defaults, and audits.</p>
            <ul class="list ok">
              <li>Write a measurable mitigation for each harm.</li>
              <li>Define owner, trigger, and review cadence.</li>
              <li>Instrument telemetry & reporting without overâ€‘collection.</li>
            </ul>
          </div>
          <div class="card col-12">
            <h4>Dark Pattern Disarmament (15m)</h4>
            <p class="meta">Rewrite flows to respect consent, attention, and autonomy.</p>
            <ul class="list">
              <li>Remove coercive defaults; add equal prominence choices.</li>
              <li>Timebox nudges; log and review conversion vs. complaints.</li>
              <li>Document rationale in decision record.</li>
            </ul>
          </div>
          <div class="card col-12">
            <h4>Redâ€‘Team Round (20m)</h4>
            <p class="meta">Adversarial exploration within safety bounds.</p>
            <ul class="list">
              <li>Abuse ideation per risk zone; attempt to bypass controls.</li>
              <li>Capture repro steps; convert into tests & monitors.</li>
              <li>Plan fixes; record residual risk and acceptor.</li>
            </ul>
          </div>
        </div>
      </div>
    </article>
  </section>
</main>

<footer>
  <p>Built for responsible tech workshops. Use the chips to focus risk zones; the accordion holds cards, checklists, and guides. Subtle audio cues and haptics can be toggled above. All clientâ€‘side; no data leaves the page.</p>
</footer>

<script>
  // Respect user preferences
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  // Audio engine (very subtle)
  let audioEnabled = !prefersReducedMotion; // default off if reduced motion, else on
  let hapticsEnabled = !prefersReducedMotion;
  const audioToggle = document.getElementById('toggle-audio');
  const hapticsToggle = document.getElementById('toggle-haptics');
  audioToggle.setAttribute('aria-pressed', String(audioEnabled));
  audioToggle.setAttribute('aria-checked', String(audioEnabled));
  hapticsToggle.setAttribute('aria-pressed', String(hapticsEnabled));
  hapticsToggle.setAttribute('aria-checked', String(hapticsEnabled));

  let actx;
  function ping(freq=600, dur=0.08, gain=0.02) {
    if (!audioEnabled) return;
    try {
      actx = actx || new (window.AudioContext || window.webkitAudioContext)();
      const o = actx.createOscillator();
      const g = actx.createGain();
      o.type = 'sine';
      o.frequency.value = freq;
      g.gain.value = gain;
      o.connect(g).connect(actx.destination);
      o.start();
      o.stop(actx.currentTime + dur);
    } catch {}
  }
  function chime(up=true) { // expand/collapse
    if (!audioEnabled) return;
    try {
      actx = actx || new (window.AudioContext || window.webkitAudioContext)();
      const g = actx.createGain(); g.gain.value = 0.02; g.connect(actx.destination);
      const freqs = up ? [520, 660] : [480, 360];
      let t = actx.currentTime;
      freqs.forEach((f,i)=>{ const o=actx.createOscillator(); o.frequency.value=f; o.type='triangle'; o.connect(g); o.start(t+i*0.06); o.stop(t+i*0.06+0.1); });
    } catch {}
  }
  function vib(pattern=[10]) { if (hapticsEnabled && 'vibrate' in navigator) navigator.vibrate(pattern); }

  audioToggle.addEventListener('click', () => {
    audioEnabled = !audioEnabled;
    audioToggle.setAttribute('aria-pressed', String(audioEnabled));
    audioToggle.setAttribute('aria-checked', String(audioEnabled));
    vib([8]); if (audioEnabled) ping(700,0.06,0.03);
  });
  hapticsToggle.addEventListener('click', () => {
    hapticsEnabled = !hapticsEnabled;
    hapticsToggle.setAttribute('aria-pressed', String(hapticsEnabled));
    hapticsToggle.setAttribute('aria-checked', String(hapticsEnabled));
    vib([4,40,4]); ping(440,0.05,0.02);
  });

  // Risk zones
  const zones = [
    { id:'bias',        name:'Bias & Fairness',           dot:'#f59e0b' },
    { id:'privacy',     name:'Privacy & Surveillance',    dot:'#f59e0b' },
    { id:'manipulation',name:'Manipulative Design',       dot:'#f59e0b' },
    { id:'wellbeing',   name:'Addiction & Wellbeing',     dot:'#f59e0b' },
    { id:'misinfo',     name:'Dis/Misinformation',        dot:'#f59e0b' },
    { id:'access',      name:'Exclusion & Accessibility', dot:'#f59e0b' },
    { id:'power',       name:'Power & Labor',             dot:'#f59e0b' },
    { id:'security',    name:'Security & Abuse',          dot:'#f59e0b' },
    { id:'env',         name:'Environmental Impact',      dot:'#f59e0b' },
    { id:'youth',       name:'Children & Vulnerable Users',dot:'#f59e0b' },
    { id:'transparency',name:'Transparency & Consent',    dot:'#f59e0b' }
  ];

  const chipsWrap = document.querySelector('.chips');
  const live = document.getElementById('live');
  const selected = new Set();

  function chipEl(zone) {
    const btn = document.createElement('button');
    btn.className = 'chip';
    btn.type = 'button';
    btn.setAttribute('aria-pressed','false');
    btn.setAttribute('data-zone', zone.id);
    btn.innerHTML = `<span class="dot" style="background:${zone.dot}"></span><span>${zone.name}</span>`;
    btn.addEventListener('click', () => {
      const id = zone.id;
      const isOn = selected.has(id);
      if (isOn) selected.delete(id); else selected.add(id);
      btn.setAttribute('aria-pressed', String(!isOn));
      vib([6]); ping(660 + (Math.random()*60-30), 0.05, 0.02);
      announce();
      applyFilter();
    });
    btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); btn.click(); }});
    return btn;
  }

  zones.forEach(z => chipsWrap.appendChild(chipEl(z)));

  function announce() {
    const n = selected.size;
    document.getElementById('kpi-selected').querySelector('strong').textContent = String(n);
    live.textContent = n ? `${n} risk zone${n>1?'s':''} selected` : 'No risk zones selected';
  }

  // Risk cards data (minimal, workshop-friendly)
  const riskCards = zones.map(z => ({
    id: z.id,
    title: z.name,
    tags: [z.id],
    signals: [
      'Skewed outcomes across groups',
      'Opaque criteria or models',
      'Disparate complaint patterns'
    ],
    questions: [
      'Who is over/underâ€‘served by this feature?',
      'Which data or labels could encode systemic bias?',
      'What measurement would falsify our fairness claim?'
    ]
  }));

  const cardsGrid = document.getElementById('cards-grid');
  function renderCards() {
    cardsGrid.innerHTML='';
    riskCards.forEach(c => {
      const d = document.createElement('div'); d.className = 'card col-12 col-6 col-4 filterable';
      d.setAttribute('data-tags', c.tags.join(','));
      d.innerHTML = `
        <h4>${c.title}</h4>
        <div class="meta">Signals</div>
        <ul class="list">${c.signals.map(s=>`<li>${s}</li>`).join('')}</ul>
        <div class="meta" style="margin-top:.5rem;">Probe Questions</div>
        <ul class="list">${c.questions.map(q=>`<li>${q}</li>`).join('')}</ul>
        <div style="margin-top:.4rem; display:flex; gap:.4rem; flex-wrap:wrap;">
          ${c.tags.map(t=>`<span class="pill">#${t}</span>`).join('')}
        </div>`;
      cardsGrid.appendChild(d);
    });
  }

  // Checklist items
  const checklist = [
    { text:'Data minimization & retention limits are documented and enforced.', tags:['privacy','security','transparency'] },
    { text:'Bias evaluation across key groups; publish methodology & caveats.', tags:['bias','transparency'] },
    { text:'Consent flows are reversible, granular, and symmetric (no coercion).', tags:['manipulation','transparency','privacy'] },
    { text:'Ageâ€‘appropriate design reviewed; sensitive cohorts protected.', tags:['youth','wellbeing','privacy'] },
    { text:'Abuse & threat modeling; incident response playbooks rehearsed.', tags:['security','power'] },
    { text:'Accessibility review (WCAG) and assistive tech testing done.', tags:['access'] },
    { text:'Energy/compute budget measured; efficiency alternatives considered.', tags:['env'] },
    { text:'Worker impacts (supply chain, data labeling, ops) assessed.', tags:['power'] },
    { text:'Content integrity safeguards vs. mis/disinformation in place.', tags:['misinfo','security'] },
    { text:'Dark patterns inventory removed; conversions reâ€‘benchmarked.', tags:['manipulation'] },
  ];

  const checksGrid = document.getElementById('checks-grid');
  function renderChecks() {
    checksGrid.innerHTML='';
    checklist.forEach((c,i)=>{
      const wrap = document.createElement('div'); wrap.className='card col-12 filterable'; wrap.setAttribute('data-tags', c.tags.join(','));
      wrap.innerHTML = `
        <label style="display:flex; gap:.6rem; align-items:flex-start; cursor:pointer;">
          <input type="checkbox" aria-label="${c.text}" data-idx="${i}" />
          <span>${c.text}</span>
        </label>
        <div style="margin-top:.4rem; display:flex; gap:.4rem; flex-wrap:wrap;">${c.tags.map(t=>`<span class='pill'>#${t}</span>`).join('')}</div>
      `;
      wrap.querySelector('input').addEventListener('change', (e)=>{ vib([6]); ping(e.target.checked?520:360,0.05,0.018); });
      checksGrid.appendChild(wrap);
    });
  }

  function applyFilter() {
    const tags = [...selected];
    const showAll = tags.length === 0;
    let vCards=0, vChecks=0;
    document.querySelectorAll('.filterable').forEach(el => {
      const t = el.getAttribute('data-tags')?.split(',') || [];
      const visible = showAll || t.some(x => selected.has(x));
      el.style.display = visible ? '' : 'none';
      if (el.closest('#cards-grid')) vCards += visible?1:0;
      if (el.closest('#checks-grid')) vChecks += visible?1:0;
    });
    document.getElementById('kpi-visible-cards').querySelector('strong').textContent = String(vCards);
    document.getElementById('kpi-visible-checks').querySelector('strong').textContent = String(vChecks);
    document.getElementById('count-cards').textContent = String(vCards);
    document.getElementById('count-checks').textContent = String(vChecks);
  }

  function countStatic() {
    // initial counts when no filter
    const vCards = document.querySelectorAll('#cards-grid .filterable').length;
    const vChecks = document.querySelectorAll('#checks-grid .filterable').length;
    document.getElementById('kpi-visible-cards').querySelector('strong').textContent = String(vCards);
    document.getElementById('kpi-visible-checks').querySelector('strong').textContent = String(vChecks);
    document.getElementById('count-cards').textContent = String(vCards);
    document.getElementById('count-checks').textContent = String(vChecks);
  }

  // Accordion behavior
  document.querySelectorAll('.acc .trigger').forEach(btn => {
    btn.addEventListener('click', () => toggleAcc(btn));
    btn.addEventListener('keydown', (e)=>{
      if (e.key==='ArrowDown' || e.key==='ArrowRight') moveAcc(btn, 1);
      if (e.key==='ArrowUp' || e.key==='ArrowLeft') moveAcc(btn, -1);
      if (e.key==='Home') focusAcc(0);
      if (e.key==='End') focusAcc(-1);
    });
  });

  function allTriggers() { return Array.from(document.querySelectorAll('.acc .trigger')); }
  function moveAcc(current, dir) {
    const list = allTriggers();
    const idx = list.indexOf(current);
    const next = (idx + dir + list.length) % list.length;
    list[next].focus(); ping(700,0.04,0.015);
  }
  function focusAcc(which) {
    const list = allTriggers();
    const idx = which === -1 ? list.length - 1 : which;
    list[idx].focus(); ping(700,0.04,0.015);
  }
  function toggleAcc(btn) {
    const panel = document.getElementById(btn.getAttribute('aria-controls'));
    const open = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', String(!open));
    btn.closest('.acc').dataset.open = String(!open);
    panel.hidden = open;
    vib(open? [3] : [8]); chime(!open);
  }

  // Initial render
  renderCards();
  renderChecks();
  countStatic();

  // Update counts on DOM changes (simple observer)
  const obs = new MutationObserver(countStatic);
  obs.observe(document.getElementById('cards-grid'), { childList:true, subtree:false });
  obs.observe(document.getElementById('checks-grid'), { childList:true, subtree:false });

  // Focus management: send focus to main on load for screen readers convenience
  window.requestAnimationFrame(()=>{ document.getElementById('main').focus({preventScroll:true}); });
</script>
</body>
</html>
